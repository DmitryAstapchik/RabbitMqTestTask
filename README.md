# RabbitMqTestTask
## Запуск сервера RabbitMQ в докер контейнере на своем локальном компьютере.
Для этого нам необходимо, чтобы на нашем компьютере предварительно было установлено программное обеспечение Docker Desktop.
Для этого переходим по ссылке https://www.docker.com/products/docker-desktop, скачиваем установщик и запускаем его.
Важно выбрать опции _Enable Hyper-V Windows Features_ или _Install required Windows components for WSL 2_, когда установщик об этом спросит.
Следуем инструкциям установщика, и по завершении процесса установки жмем кнопку Close.
Находим Docker Desktop в списке установленных на компьютере программ, и запускаем его.
В командной строке Windows или в PowerShell поочередно запускаем две следующие команды:

`docker run -d --hostname my-rabbit-host --name my-rabbit -e RABBITMQ_DEFAULT_USER=user -e RABBITMQ_DEFAULT_PASS=password rabbitmq:3-management`

`docker run -it --rm --name rabbitmq -p 5672:5672 -p 15672:15672 rabbitmq:3-management`

Окно командной строки не закрываем.
В приложении Docker Desktop, на вкладке Containers / Apps увидим запущенные контейнеры RabbitMQ.
В браузере перейдем по ссылке localhost:15672. В поля имя пользователя и пароль введем guest и guest. Здесь мы можем управлять нашей службой RabbitMQ.

## О проекте
Решение настроено на последовательный запуск 2 проектов - Producer и Consumer. Для проверки работы достаточно нажать кнопку Start. Файл БД _statuses.db_ расположен в папке проекта Consumer, данные в нём сохраняются после завершения работы проекта. В папке проекта Producer находятся тестовые xml-файлы _status.xml, status2.xml, status3.xml_. Также в каждом проекте есть файл конфигурации _App.config_, в котором хранятся имя хоста RabbitMQ и имя очереди.

## Задание
**Название задачи:** Обработка XML файлов с использованием микросервисного подхода. (C#
RabbitMQ, SQLite)

**Задача:** Разработать систему для обработки XML файлов с использованием RabbitMQ для
взаимодействия между несколькими сервисами в .NET.

**Требования:**

1. FileParser Service: Сервис, отвечающий за обработку XML файлов. Читает XML файлы с
диска с периодичностью 1 раз в секунду. Парсит XML данные и создает классы на основе
полученных данных. Случайным образом изменяет поле ModuleState каждого модуля (Online,
Run, NotReady, Offline). Формирует результат в формате JSON (содержащем все модули с
измененным полем). Отправляет сформированный JSON в DataProcessor Service через
RabbitMQ для дальнейшей обработки.

2. DataProcessor Service: Сервис, который принимает сообщения из RabbitMQ и обрабатывает
данные. Сохраняет результаты обработки в базу данных (возможно использование локальной
БД). Сохраняет поля ModuleCategoryID и ModuleState. Если ModuleCategoryID уже
существует в БД, обновляет только ModuleState.

3. RabbitMQ:
Используется для связи между FileParser и DataProcessor сервисами.

4. Многопоточность:
Обеспечить обработку файла в отдельном потоке для оптимизации процесса.

5. Дополнительные задания:
Реализовать логирование для отслеживания процесса обработки файла. Обработка ошибок.

**Что использовать и какой результат должен быть:**

**База данных:** Использование SQLite для хранения данных.

**Предоставление результатов:**

**Исходный код:** Предоставление исходного кода на GitHub или в виде архива.

**Файлы базы данных:** Предоставление файлов базы данных SQLite, возможно, с примерами
или тестовыми данными.

**Readme файл:** Описание шагов по развертыванию системы на хосте для проведения проверки.
Инструкции по установке и запуску сервисов.
Шаги по созданию и настройке базы данных. Конфигурирование подключения к RabbitMQ.

**Конфигурируемость подключения:** Легко изменяемые настройки подключения к RabbitMQ должны быть предусмотрены в
настройках сервисов для возможности подключения к другому RabbitMQ хосту без
изменения кода.
